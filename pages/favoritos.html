<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Favoritos - TalenTea</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <main class="container">
    <h2>Mis Favoritos ‚≠ê</h2>
    <div id="pictogramas" class="pictogramas"></div>
    <a href="menu.html" class="btn">‚Üê Volver al Men√∫</a>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const usuario = JSON.parse(localStorage.getItem('usuarioActivo'));
      const container = document.getElementById('pictogramas');

      if (!usuario || !usuario.favoritos || usuario.favoritos.length === 0) {
        container.innerHTML = '<p>No hay favoritos a√∫n.</p>';
        return;
      }

      fetch('../js/data.json')
        .then(response => response.json())
        .then(data => {
          const pictogramas = Object.values(data.pictogramas).flat();
          const favoritos = pictogramas.filter(p => usuario.favoritos.includes(p.id));

          favoritos.forEach(item => {
            const div = document.createElement('div');
            div.classList.add('pictograma');
            div.innerHTML = `
              <div class="pic-box">
                <div class="pic-header">
                  <button class="volumen" onclick="reproducirVoz('${item.nombre}')">üîä</button>
                  <button class="favorito" onclick="alert('Ya es favorito')">ü§ç</button>
                </div>
                <img src="../img/pictogramas/${item.imagen}" alt="${item.nombre}">
                <p>${item.nombre}</p>
              </div>
            `;
            container.appendChild(div);
          });
        });
    });

    function reproducirVoz(texto) {
      const voz = new SpeechSynthesisUtterance(texto);
      voz.lang = 'es-ES';
      voz.rate = 0.9;
      speechSynthesis.speak(voz);
    }
  </script>
</body>
</html>
